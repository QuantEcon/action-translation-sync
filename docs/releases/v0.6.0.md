# Release Notes: v0.6.0

**Date**: December 3, 2025  
**Status**: Production-Ready ‚úÖ

---

## Overview

v0.6.0 is a maintenance and enhancement release that cleans up the codebase and adds input validation for better error messages and developer experience.

---

## What's New

### üßπ Dependency Cleanup

Removed 10 unused AST-related packages that were left over from the original block-based approach:

- `unified`, `remark-parse`, `remark-stringify`
- `remark-directive`, `remark-math`, `remark-gfm`
- `mdast-util-to-string`, `unist-util-visit`
- `diff`, `@types/diff`

**Impact**:
- Reduced total packages from 527 to 439 (~17% reduction)
- Removed ~700KB of unnecessary dependencies
- Cleaner, more maintainable codebase

### ‚úÖ Input Validation

**Language Code Validation**:
- Validates `target-language` against configured languages in `LANGUAGE_CONFIGS`
- Clear error messages with list of supported languages
- Guidance to add new languages via configuration

```
Error: Unsupported target language: 'fr'. 
Supported languages: zh-cn. 
To add a new language, update LANGUAGE_CONFIGS in src/language-config.ts
```

**Claude Model Validation**:
- Validates model names against known patterns (sonnet, opus, haiku variants)
- Warning only (doesn't block) to allow new models
- Helps catch typos in model configuration

```
Warning: Unrecognized Claude model: 'claude-sonet-4-5-20250929'. 
Expected patterns like 'claude-sonnet-4-5-YYYYMMDD'.
```

### üîß Improved API Error Handling

Specific error messages for Anthropic API failures:

| Error Type | Message |
|------------|---------|
| Authentication | "Invalid or expired API key. Check your anthropic-api-key secret." |
| Rate Limit | "Too many requests. The action will retry automatically." |
| Connection | "Unable to reach Anthropic API. Check network connectivity." |
| Bad Request | "This may indicate an issue with the prompt or content." |

### üêõ Bug Fix

Fixed Claude model default mismatch between `action.yml` and `translator.ts`:
- Changed default from `claude-sonnet-4.5-20241022` to `claude-sonnet-4-5-20250929`

---

## Documentation Updates

- **CHANGELOG.md**: Added comprehensive changelog following Keep a Changelog format
- **TESTING.md**: Updated test counts (147 ‚Üí 155)
- **ARCHITECTURE.md**: Updated module line counts
- **INDEX.md**: Replaced corrupted file with clean version
- **STATUS-REPORT.md**: Updated to use GitHub Issues instead of TODO.md
- **copilot-instructions.md**: Updated metrics and module information

---

## Test Coverage

- **155 tests** across 9 test files (up from 147)
- 8 new tests for validation functions
- All tests passing ‚úÖ

---

## Migration Notes

### Breaking Changes

**Language Code Validation**: If you're using an unconfigured language code, you'll now get an error. To add a new language:

1. Edit `src/language-config.ts`
2. Add entry to `LANGUAGE_CONFIGS`:
```typescript
'ja': {
  code: 'ja',
  name: 'Japanese',
  additionalRules: [
    'Use proper Japanese punctuation marks („ÄÅ„ÄÇ„Äå„Äç)',
  ],
},
```
3. Rebuild and release

### No Changes Required

- Existing `zh-cn` configurations work unchanged
- All existing action inputs remain compatible

---

## Contributors

- Maintenance and cleanup release

---

## Full Changelog

See [CHANGELOG.md](../../CHANGELOG.md) for complete history.
