# Release v0.2.2 - Team Reviewers Support

**Release Date**: January 2025  
**Tag**: [v0.2.2](https://github.com/QuantEcon/action-translation-sync/releases/tag/v0.2.2)

## Overview

This release adds support for requesting reviews from GitHub teams in addition to individual users, providing more flexibility in managing translation review workflows.

## What's New

### Team Reviewers Support

Added a new `pr-team-reviewers` input that allows specifying GitHub team slugs (e.g., `translation-team`) to automatically request reviews from entire teams when creating translation PRs.

#### New Input

- **`pr-team-reviewers`**: Comma-separated list of GitHub team slugs to request reviews from
  - Type: `string`
  - Required: `false`
  - Default: `''` (empty string)
  - Example: `'translation-team,core-team'`

#### Example Usage

```yaml
name: Translation Sync
on:
  pull_request:
    types: [closed]
    branches: [main]

jobs:
  sync-translations:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - name: Sync Translations
        uses: QuantEcon/action-translation-sync@v0.2
        with:
          github-token: ${{ secrets.QUANTECON_SERVICES_PAT }}
          target-repo: 'QuantEcon/lecture-python-intro.zh-cn'
          target-language: 'zh-cn'
          anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}
          pr-reviewers: 'individual-reviewer1,individual-reviewer2'
          pr-team-reviewers: 'translation-team'
```

## Changes

### Features

- **Team Reviewers**: Added `pr-team-reviewers` input to request reviews from GitHub teams
- **Flexible Review Requests**: Support both individual user reviewers and team reviewers simultaneously
- **Proper API Handling**: Correctly separates `reviewers` and `team_reviewers` in GitHub API calls

### Implementation Details

- Updated `action.yml` with new `pr-team-reviewers` input definition
- Enhanced `src/types.ts` with `prTeamReviewers: string[]` field in `ActionInputs` interface
- Modified `src/inputs.ts` to parse comma-separated team slugs
- Updated PR creation logic in `src/index.ts` to conditionally include `team_reviewers` in API request
- Maintained graceful error handling for reviewer request failures

### Files Modified

- `action.yml` - Added input definition
- `src/types.ts` - Updated ActionInputs interface
- `src/inputs.ts` - Added team reviewers parsing
- `src/index.ts` - Enhanced PR creation with team reviewer support
- `README.md` - Updated documentation with examples

## Technical Notes

### GitHub API Integration

The GitHub API requires separate fields for user reviewers and team reviewers:

```typescript
const reviewRequest: any = {
  owner: targetOwner,
  repo: targetRepo,
  pull_number: pr.data.number
};

if (reviewers.length > 0) {
  reviewRequest.reviewers = reviewers;
}

if (teamReviewers.length > 0) {
  reviewRequest.team_reviewers = teamReviewers;
}
```

### Error Handling

Reviewer requests are wrapped in try-catch blocks with warning logs instead of failures, allowing PRs to be created successfully even if reviewer requests fail (e.g., when requestor is also a reviewer).

## Testing

- ✅ Successfully compiled with TypeScript
- ✅ Built with ncc bundler (2460kB dist/index.js)
- ✅ Committed and pushed to main branch
- ⏳ Pending: Real-world testing with GitHub teams

## Upgrade Notes

### From v0.2.1

Simply update your workflow to use `@v0.2` or `@v0.2.2`:

```yaml
uses: QuantEcon/action-translation-sync@v0.2
```

Add the new `pr-team-reviewers` input if you want to request reviews from teams:

```yaml
with:
  # ... existing inputs ...
  pr-team-reviewers: 'translation-team'
```

No breaking changes - fully backward compatible.

## Known Issues

None at this time.

## What's Next

See [TODO.md](../TODO.md) for upcoming features and improvements.

## Full Changelog

**Full Changelog**: https://github.com/QuantEcon/action-translation-sync/compare/v0.2.1...v0.2.2
